# <span style="color:#00bfff">**Quickstart**</span>

After launching the platform, users arrive on the homepage. They can follow the quickstart animation or the steps below as needed to get started.

![quickstart](../../img/quickstart-server-high-res.gif)

1. Start New Analysis
- Click **"Create New Analysis Task"** button in the Private section to begin a new analysis task. A popup window will appear, prompting users to enter details like 'Name', 'Passcode', 'Description', and whether to enable the Guidance option. 
(*Please fill in the 'Passcode' otherwise you may leave the field empty by making your analysis task public.*)

2. Add a Dataset
- Drag any public dataset under <span style="color:#00bfff">Data Source</span> section into the analysis area -- this now becomes a data node. 

3. Import Pipeline
- Click the [<span style="color:#00bfff">"Pipeline Helper"</span>](#pipeline-helper) button in the top-left corner to choose a suitable pipeline from [<span style="color:#00bfff">Pipeline Template</span>](#pipeline-template) and import it into the analysis panel for assembly.  

4. Run the Pipeline
- Once the pipeline is imported, link the data node to the analysis node (part of the pipeline) by dragging a connection line between nodes. Click the **"Run Tree"** button (![run-btn](../../img/run-btn.png)) in the data node to run the entire pipeline, or alternatively click the **"Run Node"** (![start-button](../../img/analysis-node/start-button.png)) on analysis node to run each analysis step.
![node-explained](../../img/quickstart/node-explanation.png)  

5. Result Interpretation and Debugging 
- Upon analysis completion, users can click on the green nodes (indicating successful analyses) to open the right sidebar, where where AI-generated interpretations are provided based on the context. If an analysis fails (shown by a red node), clicking the node will display explanations and solutions in the right sidebar, along with the original error messages and outputs. Users can also access the [<span style="color:#00bfff">Visualization Panel</span>](#visualization-panel) from any analysis node to view the results.
![vid-1-1](../../img/gif/1-1.gif)

<!-- 4. (Optional) For custom needs beyond built-in our function block library, users can use **"Auto-Genie"**, an LLM-based agent, to generate code acoording to Ragomics function block framework for specific tasks. -->
<!-- 5. (Optional) Before running the pipeline, users may enable **"Bug Fixer"** option with max try of at least 5 times by clicking the **Settings**. However, this feature is experimental and we are still optimizing it. -->
<!-- 6. ![enable-bug-fixer](../../img/enable-bug-fixer.png) -->
<!-- 9. (![settings-button](../../img/analysis-panel/settings-button.png)) button on the bottom toolbar of the [<span style="color:#00bfff">Analysis Panel</span>](#analysis-panel) and toggling the **Bug Fixer** switch to on state. -->




<!---
# <span style="color:#00bfff">**Platform Login and Registration**</span>

## <span style="color:#00bfff">**Guest Mode**</span>
If users do not have a platform account and prefer not to register, they can choose to log in as a guest (**Login as a guest**). In visitor mode, all editing operations will be disabled. However, guests can still view public analyses or those shared by other users.
![guest-mode](../../img/platform-login-and-registeration/image.png)

## <span style="color:#00bfff">**Platform Login**</span>
On the login page, users can enter their account credentials (mobile number) and password, then click the **Log in** button to access the platform. If users do not have an account, they can click the **Register** button to proceed with [<span style="color:#00bfff">Account Registration</span>](#acc-regist). In case users forget their password, they can click the **Forgot password** button to [<span style="color:#00bfff">Password Reset</span>](#password-reset).

## <span style="color:#00bfff" id="acc-regist">**Account Registration**</span>
On the registration page, users need to input their username, password, and mobile number (used as the login account). After entering these details, users can click the **Send** button to receive and input a mobile verification code. If users do not have an invitation code, they can contact customer service by emailing **yuze@raganetwork.com** for assistance.

## <span style="color:#00bfff" id="passwd-reset">**Password Reset**</span>
On the password reset page, users must enter their mobile number (login account) and click the **Send** button to receive a mobile verification code. Users then input the verification code along with their new password. Once the information is filled in, they can click the **Next step** button to proceed to the password reset result page. If the reset is successful, users can click the **To login** button to return to the login page.



---
-->
# <span style="color:#00bfff">**Platform Access**</span>
When users access the platform via the web link, they are directed to the homepage. The homepage displays analysis tasks created by the user and other users.  

If a user needs to access analysis tasks created by others, they can do so as a **guest** through [<span style="color: #00bfff;">Sharing Node</span>](#node-sharing). Under this **guest** mode, the user can only view the analysis process and results but will not have editing permissions for the analysis.

# <span style="color:#00bfff">**Creation and Management of Analysis Tasks**</span>

## <span style="color:#00bfff">**Workflow**</span>
Once on the homepage, the [<span style="color:#00bfff">Workflow</span>](#workflow) tab includes two sections: <span style="color:#00bfff">Analysis Task</span> and <span style="color:#00bfff">Data Source</span>. 

- In the <span style="color:#00bfff">Analysis Task</span> section, users can create and manage analysis tasks and view [<span style="color:#00bfff">Public Analyses</span>](#public-analyses) at the top of the page to explore examples of analyses provided by Ragomics.  
- In the <span style="color:#00bfff">Data Source</span> section, users can import datasets from [<span style="color:#00bfff">Public Databases</span>](#public-databases) into their accounts or [<span style="color:#00bfff">Upload Data</span>](#data-upload) from local sources.

## <span style="color:#00bfff">**Creating an Analysis**</span>

![vid-1](../../img/gif/vid-1.gif)
Once on the platform's homepage, users can go to the <span style="color:#00bfff">Analysis Task</span> page under the [<span style="color:#00bfff">Workflow</span>](#workflow) tab and click the **Create New Analysis Task** button to create a new analysis task. 

1. In the pop-up form, users must enter a name for the analysis task. While the task description is optional, it helps the [<span style="color:#00bfff">Agent</span>](#agent) module provide more accurate assistance, the user also needs to set an **passcode** for the analysis task they create. When reopening the analysis task next time, this password will be required for access.

2. Users can choose to enable the **Guidance** feature. If enabled, the [<span style="color:#00bfff">Pipeline Helper</span>](#pipeline-helper) will automatically launch the first time the user accesses the [<span style="color:#00bfff">Analysis Panel</span>](#analysis-panel) of the task, helping them quickly select an analysis pipeline tailored to their needs.  

3. Once the task is created, users will be directed to its [<span style="color:#00bfff">Analysis Panel</span>](#analysis-panel). After clicking **"Create"** button, the **passcode** and **access link** for the analysis will be displayed. Users are advised to save them.
![create-analysis](../../img/analysis-creation-and-management/create-new-analysis-task.png)

## <span style="color:#00bfff">**Managing Analysis Tasks**</span>
After logging in, users can view and manage previously created analysis tasks in the [<span style="color:#00bfff">Workflow</span>](#workflow) - <span style="color:#00bfff">Analysis Task</span> tab. If the user has the **access password** for the corresponding analysis task, 
each analysis task card contains several buttons for task management, they can click the **"Open"** button on the analysis task card and enter the password to access the [<span style="color:#00bfff">Analysis Panel</span>](#analysis-panel) for the selected task.

<!---
- **Collaborator Management Button** (![collaborate-button](../../img/analysis-creation-and-management/collaborate-button.png)): Click to open the [<span style="color:#00bfff">Collaborator Management</span>](#collaborator-management) page and invite collaborators to participate in the project analysis.
-->
- **Edit Button** (![edit-button](../../img/analysis-creation-and-management/edit-button.png)): Click to edit the task name and description.
- **Copy Button** (![copy-button](../../img/analysis-creation-and-management/copy-button.png)): Click to duplicate the current analysis task. Note that the duplicated task will only retain the **Data Source** and any unexecuted analysis pipelines. Analysis results will not be copied.
- **Delete Button** (![delete-button](../../img/analysis-creation-and-management/delete-button.png)): Click to delete the current analysis task. **This action is irreversible.**
<!---
- **Share Button** (![share-button](../../img/analysis-creation-and-management/share-button.png)): Click to access the sharing page. Users can enable sharing for the task and click the quick copy link below to generate a shareable access URL. Other users can use the link to view the shared analysis task but cannot edit it as guest users.
-->

<!---
## <span style="color:#00bfff">**Collaborator Management**</span>
When an analysis task requires collaboration with other users, the **Collaborator List** can be opened. 

- Click the **Add Collaborator** (![add-collaborator-button](../../img/analysis-creation-and-management/add-collaborator-button.png)) button in the top-left corner to invite collaborators.
- Users can assign editing permissions to collaborators as needed.
- Once added, the invited collaborator must accept the invitation through the [<span style="color:#00bfff">In-app Notifications</span>](#in-app-notifications) to access and edit the analysis task.
-->



---



# <span style="color:#00bfff">**Public Analyses and Databases**</span>

## <span style="color:#00bfff">**Public Analyses**</span>

![vid-3](../../img/gif/3.gif)
Ragomics provides users with a series of completed analysis examples. Users can directly access these [<span style="color:#00bfff">Public Analyses</span>](#public-analyses) to review the analysis process and results. However, users cannot perform any editing actions on these public analyses.

## <span style="color:#00bfff">**Public Databases**</span>

![vid-4](../../img/gif/4.gif)
On the [<span style="color:#00bfff">Workflow</span>](#workflow) - <span style="color:#00bfff">Data Source</span> page, users can explore datasets from public databases:

1. Click the **Show More** button to view additional datasets in the public database.
2. Select an interesting dataset and click the **Import** button to add it to the user's account database.

---

# <span style="color:#00bfff">**Data Upload and Management**</span>

## <span style="color:#00bfff">**Data Upload**</span>
Ragomics offers two methods for uploading data:

Method 1

![vid-5](../../img/gif/5.gif)
- Navigate to [<span style="color:#00bfff">Workflow</span>](#workflow) - <span style="color:#00bfff">Data Source</span> - **My Data** section.
- Click the **Upload** (![upload-button](../../img/data-upload-and-management/upload-from-device-button.png)) button to start the data upload process.

Method 2

![vid-6](../../img/gif/6.gif)
- In the [<span style="color:#00bfff">Analysis Panel</span>](#analysis-panel), click the **Add** (![add-button](../../img/data-upload-and-management/add-button.png)) button under the Data Source tab on the left sidebar, choose **Upload from Device** button to begin uploading data directly from your device.
![upload-from-device](../../img/data-upload-and-management/upload-from-device.png)

Supported Data Formats for Upload

Ragomics currently supports the following five data formats for upload:

1. AnnData Upload  
**Important note**:  
Please ensure that anndata key names do not contain "/". E.g. adata.obs["date/month"] is invalid. "/" causes issues when the server decomposes the anndata matrices, as "/" is treated as a subfolder by the cloud storage service we use. It is a known sanity-check related issue, and we have resolved it in the next release but not on the current alpha server. 
- Users can add `.h5ad` files by dragging and dropping or clicking the **Add** (![add-button](../../img/data-upload-and-management/anndata-add-button.png)) button.  
- Select the corresponding species information and provide a description of the data.  
- Once the file is selected and all information is filled out, click the **Upload** (![upload-button](../../img/data-upload-and-management/anndata-upload-button.png)) button to start uploading.  
- When the upload status indicates success ![complete-status](../../img/data-upload-and-management/complete-status.png), the data upload is complete.

2. 10x Data Upload
- Enter the data name, species information, and data description.  
- Click the **Next Step** button, then click **Add a Sample** to create a new sample row.  
- For multiple samples, add the corresponding number of sample rows.  
- In each sample row, upload the following three files:  
   - `barcodes.tsv`  
   - `genes.tsv`  
   - `matrix.mtx`  
- Once all data is uploaded, click the **Assemble** button to complete the upload process.

3. Assemble AnnData
- Enter species information and data description, then click the **Next Step** button.  
- Upload the required files by dragging and dropping or clicking the upload area:  
   - Mandatory Files:  
     - In the central **Layers** section, upload `X`, or `unspliced` and `spliced` files.  
     - `var`  
     - `obs`  
   - Optional Files:  
     - `obsp`  
     - `obsm`  
     - `varm`  
     - `varp`  
- Once all files are uploaded, click the **Assemble** button to finalize the AnnData assembly.  
- Click the **Complete** button to finish the upload process.

<!---
1. FastQ Upload
- Select the corresponding species information and provide a description of the data.  
- Click the **Next Step** button.  
- Add FastQ `.zip` files by dragging and dropping or clicking the central upload area.
-->
4. Spaceranger Count Upload
- Enter the data name, select the corresponding species information, and provide a description of the data.  
- Click the **Next Step** button.  
- Add Spaceranger Count data by dragging and dropping or clicking the upload area.  
- On the right side of the upload panel, you can find format requirements and mandatory file examples.  
- Once the data is uploaded, click the **Assemble** button to complete the data assembly.
![spaceranger-count-upload](../../img/data-upload-and-management/spaceranger-count-upload.png)

## <span style="color:#00bfff">**Importing Data**</span>
In the [<span style="color:#00bfff">Analysis Panel</span>](#analysis-panel), users can import data through **Add** (![add-button](../../img/data-upload-and-management/add-button.png)) button under the <span style="color:#00bfff">Data Source</span> tab on the left sidebar. There are three ways for importing data:

### 1. Importing from Existing Data
- If users have already uploaded the target data to their account via the data upload feature, they can choose to import it from existing data.  
- In the import form, select the desired data by checking the boxes on the left.  
- Click **Confirm** to import the data from the account into the current analysis task.
![import-data-1](../../img/importing-data/import-data-1.png)

### 2. Upload from Device
Please refer to [<span style="color:#00bfff">Data Upload</span>](#data-upload).

### 3. Importing from Third Party
- Over 1000 public datasets were sourced from third party such as CellxGene platform and stored in our repository for users to select from. In the list of available datasets, select and import the desired dataset by clicking "Import".
![import-data-3](../../img/importing-data/import-data-3.png)


---



# <span style="color:#00bfff">**Analysis Panel**</span>

In the [<span style="color:#00bfff">Analysis Panel</span>](#analysis-panel), users can freely perform various analysis operations, such as [<span style="color:#00bfff">Data Upload</span>](#data-upload), [<span style="color:#00bfff">Importing Data</span>](#importing-data), **Function Blocks** option, and [<span style="color:#00bfff">Analysis Pipeline Assembly</span>](#assembling-an-analysis-pipeline). After completing the analysis, users can view the results directly or navigate to the corresponding [<span style="color:#00bfff">Visualization Panel</span>](#visualization-panel) to explore the visualized outcomes. 
Users can choose between manual or [<span style="color:#00bfff">Automatic Layout</span>](#automatic-layout) option of the analysis pipeline on the current analysis panel. To switch to another analysis task, users can click the top-left **Ragomics** (![ragomics-button](../../img/analysis-panel/ragomics-button.png)) button to return to the homepage.

## **<span style="color:#00bfff;" id="automatic-layout">Automatic Layout</span>**

![vid-8](../../img/gif/8.gif)
Users can manually arrange the nodes of the analysis pipeline or enable an automatic layout feature. By clicking the **Settings** (![settings-button](../../img/analysis-panel/settings-button.png)) button on the bottom toolbar of the analysis panel, users can activate automatic layout in the pop-up options. When enabled, any subsequently connected analysis nodes will be automatically arranged. To instantly rearrange the entire analysis pipeline, users can click the bottom toolbar button, and all nodes in the current analysis panel will be automatically laid out immediately.

## **<span style="color:#00bfff;">Analysis Pipeline Thumbnail</span>**

![vid-8-2](../../img/gif/8-2.gif)
For large analysis pipelines that are difficult to overview, users can enable the thumbnail feature by clicking the **Zoom** (![enlarge-button](../../img/analysis-panel/enlarge-button.png)) button on the bottom toolbar of the analysis panel. The thumbnail allows users to quickly locate which part of the pipeline they are currently operating on within the broader analysis pipeline.
![thumbnail](../../img/analysis-panel/analysis-pipeline-thumbnail.png)

## **<span style="color:#00bfff;">Analysis Node Status Panel</span>**

![vid-9](../../img/gif/9.gif)
If users need an overview of the status of all analysis nodes in the current pipeline, they can refer to the bottom toolbar. The toolbar displays the total number of nodes in the current panel, along with counts for nodes that are running, failed, successful, waiting, or under bug-fix debugging.  

Users can click the total number of nodes (shown in blue) to open the **Analysis Node Status Panel**. When the **Highlight** setting is enabled, clicking any node card in the analysis panel will highlight the corresponding row in the status panel. Similarly, clicking a node name in the status panel will cause the analysis panel to focus on the corresponding node in the pipeline.  

Additionally, clicking the **View Code** (![detail-code](../../img/analysis-panel/detail.png)) icon next to each node in the status panel allows users to view the code for that specific node.
![analysis-dashboard](../../img/analysis-panel/analysis-dashboard.png)

## <span style="color:#00bfff;">**Sharing Analysis Task**</span>

![vid-10](../../img/gif/10.gif)
To share a specific analysis task with others, users can click the **"Share"** button at the top of the analysis panel. In the pop-up window, enable the **"Public"** setting and click the **"Copy Link"** button to generate a link for the current analysis task. Other users can use this link to access and view the shared task; however, **guest users** will not be able to make edits. If the user wants other users to also be able to edit, they can share the **access link** and **access password** for this analysis task with them. If the user wishes to change the password, they can click the **"Edit"** button next to the **access password** to make the change.
<!---
If editing permissions are required, users can perform [<span style="color:#00bfff;">Collaborator Management</span>](#collaborator-management) in the settings below.

## <span style="color:#00bfff;">**In-App Notifications**</span>
When an analysis node runs successfully or fails, or when a user receives a collaboration invitation, the in-app notification (![in-app-notification](../../img/analysis-panel/in-app-notification.png)) button at the top of the analysis panel will display an alert. Clicking the button will show a list of all notifications, allowing users to view and respond to the information accordingly.
-->



---

# <span style="color:#00bfff;">**Analysis Pipeline**</span>

## <span style="color:#00bfff;">**Assembling an Analysis Pipeline**</span>

![vid-12](../../img/gif/12.gif)
1. In the [<span style="color:#00bfff;">Analysis Panel</span>](#analysis-panel), select any dataset from either the **Public** or the **Imported** list on the left sidebar.  
2. Drag the selected data into the main analysis area of the panel.  
3. Based on your analysis requirements, choose the appropriate algorithm modules and drag them into the main analysis area.  
4. Independent algorithm modules can be connected to uploaded single-cell sequencing data or other [<span style="color:#00bfff;">Analysis Nodes</span>](#analysis-nodes).  
5. To connect, select the connection point on one side and drag it to another function block or data node.
![analysis-pipeline-assembly](../../img/analysis-pipeline/analysis-pipeline-assembly.png)

## <span style="color:#00bfff;">**Pipeline Helper and Analysis Nodes**</span>

### <span style="color:#00bfff;">**Pipeline Helper**</span>
If users require assistance when assembling analysis pipelines, they can enable **Guidance** during the [<span style="color:#00bfff;">Creating an Analysis</span>](#creating-an-analysis) step or click the **Pipeline Helper** button in the top-left corner of the main area in the [<span style="color:#00bfff;">Analysis Panel</span>](#analysis-panel).

### <span style="color:#00bfff;">**Pipeline Template**</span>
In the [<span style="color:#00bfff;">Pipeline Helper<span>](#pipeline-helper) page, users can select a suitable analysis pipeline from Ragomics' [<span style="color:#00bfff;">Pipeline Template<span>](#pipeline-template) and import it into the **Analysis Panel** for use.

Users can select analysis pipelines from Ragomics' [<span style="color:#00bfff;">Pipeline Template<span>](#pipeline-template) and import them into the analysis panel on the Analysis Pipeline Assistant page.  
<!---
If the template library does not have a suitable template, users can use the [<span style="color:#00bfff;">AI Pipeline</span>](#ai-pipeline) feature to generate a new analysis pipeline.
![pipeline-template](../../img/analysis-pipeline/pipeline-template.png)
-->

### <span style="color:#00bfff;">**Upload of Function Blocks**</span>

![vid-14](../../img/gif/14.gif)
If the user has developed or obtained certain bioinformatics algorithm/module not available on the platform and wishes to run them on the platform, they can click the **"Upload"** button at the top of the **Function Blocks** list to open the upload interface. In the upload interface, users need to either drag and drop or click the upload area to select the algorithm/module files to be uploaded. Users also need to fill in information such as the algorithm/module name, group, and version name. Finally, clicking the "Finish and Upload" button will initiate the upload of the algorithm/module.
![fb-upload](../../img/analysis-pipeline/fb-upload.png) 

After the algorithm/module upload is complete, users will be able to find their uploaded algorithm/module under the **"Private"** category in the **Function Blocks** list and use them as needed.



---



# <span style="color:#00bfff;">**Analysis Nodes**</span>
In the [<span style="color:#00bfff;">Analysis Panel</span>](#analysis-panel), each algorithm module connected within the [<span style="color:#00bfff;">Analysis Pipeline</span>](#analysis-pipeline) is referred to as an [<span style="color:#00bfff;">Analysis Node</span>](#analysis-nodes). Users can perform the following operations on nodes:

- [<span style="color:#00bfff;">Parameter Fine-tuning</span>](#parameter-fine-tuning)
- [<span style="color:#00bfff;">Running Analysis</span>](#running-analysis)
- <span style="color:#00bfff;">Node Code</span>, [<span style="color:#00bfff;">Node Output Results</span>](#node-output-results), [<span style="color:#00bfff;">Calculation Logs</span>](#calculation-logs), and [<span style="color:#00bfff;">Job Info</span>](#job-info) View
- [<span style="color:#00bfff;">Node Sharing</span>](#node-sharing)
- [<span style="color:#00bfff;">Computational Resources Configuration</span>](#computational-resources-configuration)
- [<span style="color:#00bfff;">Node Data Download</span>](#node-data-download)

Node Design
- Connection Zones: Located on the left and right sides of the node for [<span style="color:#00bfff;">Analysis Pipeline Assembly</span>](#assembling-an-analysis-pipeline).
- [<span style="color:#00bfff;">Node States</span>](#node-states): Indicated by the color at the top of the node.
- Node Name: Displays the default name of the algorithm module. Users can click the **Edit** (![edit-button](../../img/analysis-node/edit-button.png)) button to customize the node name.

## <span style="color:#00bfff;">**Parameter Fine-tuning**</span>
Users can click the **Parameter** (![parameter-button](../../img/analysis-node/parameter-button.png)) button within an analysis node to open the parameter adjustment panel.
In the parameters panel, parameters marked with a red asterisk are required. If users are unclear about the meaning and function of a parameter, they can click the **Information** (![information-icon](../../img/analysis-node/information-icon.png)) icon next to each parameter to view a description. Once the parameters are filled in, users can click the **"Update"** button to save the parameters, or click the **"Update and Run"** button to execute the current analysis node. 
Clicking the **"Reset"** button will revert the parameters to their last updated state. 
Clicking the **"Set as Default"** button will reset all parameters in the analysis node to their default values. If users need assistance from the [<span style="color:#00bfff;">Agent</span>](#agent) while filling in parameters, they can use the [<span style="color:#00bfff;">AI Parameter</span>](#ai-parameter) module.

## <span style="color:#00bfff;">**Running Analysis**</span>
When users need to run a specific [<span style="color:#00bfff;">Analysis Node</span>](#analysis-nodes), they have three options:

1. Users can click the **"Update and Run"** button in the parameter panel of the analysis node to run the current node.
2. Users can click the **"Run Node"** (![start-button](../../img/analysis-node/start-button.png)) button on the node card of the [<span style="color:#00bfff;">Analysis Node</span>](#analysis-nodes) to start the analysis.
3. Users can click the **"More"** (![more-button](../../img/analysis-node/more-button.png)) button on the node card of the [<span style="color:#00bfff;">Analysis Node</span>](#analysis-nodes), then select **"Run Sub Tree"** in the secondary popup. In this case, the node and all subsequent child nodes will be executed sequentially.

## <span style="color:#00bfff;">**Node States**</span>
In the analysis panel, there are four possible states for an analysis node:

1. Ready to run: The top of the node card is white, indicating that the node has not been run yet.

![status-1](../../img/analysis-node/status-ready-to-run.png)

2. Running: The top of the node card is gray, indicating that the node is currently running.

![status-2](../../img/analysis-node/status-running.png)

3. Run completed: The top of the node card is green, indicating that the node has successfully run.

![status-3](../../img/analysis-node/status-completed.png)

4. Run error: The top of the node card is red, indicating that an error occurred during the node's run, requiring [<span style="color:#00bfff;">Bug Fixing</span>](#bug-fixing).

![status-4](../../img/analysis-node/status-running-and-error.png)

## <strong style="color: #00bfff; font-weight:bold;">Node Output Results</strong>
When certain nodes generate downloadable CSV files after execution, users can click the **"More"** (![more-button](../../img/analysis-node/more-button.png)) button on the analysis node card, select **"Output"** in the secondary popup, and choose the file they need to download.

![node-output](../../img/analysis-node/node-output.png)

## <strong style="color: #00bfff; font-weight:bold;">Calculation Logs</strong>
After a node has been calculated at least once, users can click the **"More"** (![more-button](../../img/analysis-node/more-button.png)) button on the analysis node card, select "Calculation Logs" in the secondary popup to view it. Users can click the export button to export the logs as a CSV file and download it to their local machine.
![analysis-logs](../../img/analysis-node/analysis-calculation-log.png)

## <strong style="color: #00bfff;">Job Info</strong>
After a node has been calculated at least once, users can click the button on the analysis node card, select "Job Info" in the secondary popup to view it.
![analysis-details](../../img/analysis-node/analysis-job-details.png)

## <strong style="color: #00bfff;">Node Sharing</strong>
When a user has opened a [<span style="color: #00bfff;">Sharing Analysis Task</span>](#sharing-analysis-task) but wishes to focus on a specific analysis node to share with others, they can click the **"More"** (![more-button](../../img/analysis-node/more-button.png)) button on the analysis node card, select **"Share"** in the secondary popup. This action will automatically copy the link to the current node, and other users can access and view the shared analysis task using the link. 
Please note that guest users will not have permission to edit the shared analysis.

# <strong style="color: #00bfff;">Computational Resources Configuration</strong>
When users analyze data or algorithm modules that require significant computational resources, they can click the button on the analysis node card, select "Configure Computational Resources" in the secondary popup, and choose parameters like CPU, memory, timeout limits, etc., according to their needs. After configuration, the node will follow this setup when running.

# <strong style="color: #00bfff;">Node Data Download</strong>
After a node completes its calculation, users can click the **"Download"** (![download-button](../../img/analysis-node/download-button.png)) button on the top-right of the analysis node card to download the current node's h5ad file.

# <strong style="color: #00bfff;">Chart Display</strong>

![vid-15](../../img/gif/15.gif)
After an analysis node with charting functionality completes its execution, users can click the **Settings** (![settings-button](../../img/analysis-panel/settings-button.png)) button in the toolbar at the bottom of the analysis panel to enable **"Show Chart"**. The chart output will be displayed at the bottom of the node, and clicking the chart will redirect to the corresponding [<span style="color: #00bfff;">Visualization Panel</span>](#visualization-panel) page.

![chart-display](../../img/analysis-node/chart-display.png)

# <strong style="color: #00bfff;">Cancelling Analysis</strong>
If users need to stop the current running analysis process for any reason, they can click the **"More"** (![more-button](../../img/analysis-node/more-button.png)) button on the analysis node card, and in the secondary popup, select "Cancel Analysis."

If multiple analysis nodes are running simultaneously and the user wants to stop all analyses at once, they can click the **"Cancel All"** button in the toolbar at the bottom of the analysis panel.



---



# <span style="color: #00bfff"><strong>Agent</strong></span>
An agent is a series of AI-assisted analysis features based on large language models in Ragomics.

<!---
## <span style="color: #00bfff;"><strong>AI Pipeline</strong></span>
In the <span style="color: #00bfff;">AI Pipeline Helper</span> page, users can utilize the AI Pipeline feature to select the data they wish to analyze and input their analysis requirements. If the user is unsure about how to input the analysis requirements, they can click on the **Request Templates** on the page to obtain examples. 

After filling in the analysis requirements, the user clicks **"Next"**, Ragomics will display the user’s original requirements alongside the AI-optimized version. Users can compare the two and click the **"Edit"** (![edit-button](../../img/agent/edit-button.png)) button to edit. If the user is dissatisfied with the current AI-generated optimized result, they can click the **"Refresh"** (![refresh-button](../../img/agent/refresh-button.png)) button to refresh it. 

The user needs to select the final requirements text to use and click the **"Confirm"** button. In the next step, the user must choose between querying analysis pipelines from the [<span style="color: #00bfff;">Pipeline Template</span>](#pipeline-template) or generating an analysis pipeline directly through AI. After generation, they can click the **"Import"** button to bring the current generated analysis pipeline into the analysis panel.
-->
## <span style="color: #00bfff;"><strong>AI Parameter</strong></span>

![vid-16](../../img/gif/16.gif)
If users encounter difficulties when filling in the parameters for an analysis node, they can click the AI Parameter button at the bottom-left of the parameter panel. In the popup menu, users can select either **"Fill All Parameters"** or **"Complete Unfilled Parameters"**.

- **"Fill All Parameters"**: In this case, the agent will automatically fill in the appropriate parameters based on the user’s current analysis data, pipeline, and analysis node.
  
- **"Complete Unfilled Parameters"**: In this case, the agent will retain the existing parameters and automatically complete the remaining parameters based on the user’s current analysis data, pipeline, and analysis node.

When users click the **"Show Parameter Update History"** button, a popup will display the entire history of parameters generated using the AI Parameter function in this node.
![ai-parameter](../../img/agent/ai-parameter.png)

## <span style="color: #00bfff;"><strong>Bug Fixing</strong></span>

![vid-17](../../img/gif/17.gif)
During the analysis process, users may encounter errors in certain analysis nodes. In such cases, users can click on the erroring node, and the error message for that node will appear on the right side of the analysis panel. The error message includes a description of the error, suggested fixes, and logs. Users can use this information to manually fix the error.

![bug-fixing](../../img/agent/bug-fixing.png)

If users are still unable to fix the error, they can try using the **Bug Fixer** to resolve the issue. Users can click the button in the toolbar at the bottom of the analysis panel, select the **Bug Fixer** option in the popup, and input the maximum retry count for fixing. Afterward, they can re-run the erroring node, and the **Bug Fixer** will automatically attempt to fix the error.

![bug-fixer](../../img/agent/bug-fixer.png)

## <span style="color: #00bfff;"><strong>AI Interpretation</strong></span>

![vid-18](../../img/gif/18.gif)
Once an analysis node has completed execution, users can click to select the node. In the [<span style="color: #00bfff;">AI Interpretation</span>](#ai-interpretation) section of the control panel on the right, users can click **"Generate"**, and the agent module will provide biological interpretations of the data from that node, along with suggestions for subsequent analysis.



---



# <span style="color:#00bfff">**Visualization Panel**</span>  
Once the user completes the run of any analysis node, they can click the analysis node and open the [<span style="color:#00bfff">Visualization Panel</span>](#visualization-panel) by clicking the top of the right panel. The [<span style="color:#00bfff">Visualization Panel</span>](#visualization-panel) is divided into three sections: [<span style="color:#00bfff">Data Information Area</span>](#data-information-area[), [<span style="color:#00bfff">Main Image Display and Plotting Function Area</span>](#main-image-and-plotting-function-area), and [<span style="color:#00bfff">Cell and Gene Group Management Area</span>](#cell-and-gene-group-management-area).
![viz-panel](../../img/visualization-panel/visualization-panel.png)

## <span style="color:#00bfff">**Data Information Area**</span>  
The [<span style="color:#00bfff">Data Information Area</span>](#data-information-area) includes the [<span style="color:#00bfff">Observations (obs)</span>](#observations-obs-tab) tab, [<span style="color:#00bfff">Gene List</span>](#gene-list) tab, and Observations Matrix (obsm) tab.

### <span style="color:#00bfff">**Observations (obs) Tab**</span>  
The [<span style="color:#00bfff">Observations Tab</span>](#observations-obs-tab) contains two data blocks: [<span style="color:#00bfff">Cell Categories</span>](#cell-categories-category-data-area) and [<span style="color:#00bfff">Continuous Values</span>](#continuous-values).

#### <span style="color:#00bfff">**Cell Categories Data Area**</span>  
In the [<span style="color:#00bfff">Cell Categories Data Area</span>](#cell-categories-data-area), metadata about cells is displayed, such as cell types and sample information. This helps users better understand the data characteristics and background information of each cell.  

  - <span style="color:#00bfff">**Cell Categories Coloring**</span>  
    When the [<span style="color:#00bfff">Main Image Display and Plotting Area</span>](#main-image-and-plotting-function-area) is in [<span style="color:#00bfff">Embedding</span>](#embedding) mode, users can click the **"Color"** (![color-button](../../img/visualization-panel/color-button.png)) button next to any dimension of the cell category to color the plot based on that category.
    
    ![coloring-cell-category](../../img/visualization-panel/coloring-cell-category.png)

    Users can expand the cell category row to view subcategories under the current category.
    
    ![expanding-cell-subcategory-1](../../img/visualization-panel/expanding-cell-subcategory-1.png)
    ![expanding-cell-subcategory-2](../../img/visualization-panel/expanding-cell-subcategory-2.png)
    
    Users can define the colors for these subcategories manually by clicking the **"Paint"** (![paint-button](../../img/visualization-panel/paint-button.png)) button to choose different color pallette or manually choose the color for each subcategory by clicking the **"Color"** (![color-button](../../img/visualization-panel/color-button.png)) button.
    
    ![painting-cell-subcategory-1](../../img/visualization-panel/painting-cell-subcategory-1.png)
    ![coloring-cell-subcategory-2](../../img/visualization-panel/coloring-cell-subcategory-2.png)

    When a cell category is colored, users can expand the subcategories of other cell categories to cross-examine and compare data under different categories.
    
    ![cross-view](../../img/visualization-panel/cross-view.png)

    Users can click the **"More"** (![more-button](../../img/visualization-panel/more-button.png)) button to directly edit the cell category, the pop-up contains renaming, deleting and other operations.

  - <span style="color:#00bfff">**Subcategory Clustering Analysis**</span>  
    If users want to perform clustering on subcategories of a specific cell category, they can click the **"Cluster"** (![cluster-button](../../img/visualization-panel/cluster-button.png)) button next to that subcategory and choose the clustering algorithm to apply. After the algorithm completes, they can view the results in the corresponding analysis node.

  - <span style="color:#00bfff">**Cell Category Display Control**</span>  
    Users can toggle the display of cell categories or subcategories by clicking the **"Togle"** (![toggle-button](../../img/visualization-panel/hide-button.png)) buttons next to them, which helps users focus on specific cells within the Embedding page.

#### <span style="color:#00bfff">**Continuous Values**</span>  
In the [<span style="color:#00bfff">Continuous Values</span>](#continuous-values) data area, users can select one or more continuous values to color the plot. They can also click **"Paint"** (![paint-button](../../img/visualization-panel/paint-button.png)) button to choose a color scheme for the coloring or manually define the colors for the start, middle, and end of the continuous values.

If users want to filter cells based on continuous values, they can click the **"Expand"** (![expand-button](../../img/visualization-panel/expand-button.png)) button next to the continuous value to expand the histogram and filter cells accordingly.

Users can also set the **X-axis** or **Y-axis** of the Embedding plot directly using **"X-Y"** (![xy-button](../../img/visualization-panel/xyvalue-button.png)) buttons next to the continuous values or genes, this function is also available in [<span style="color:#00bfff">Gene List</span>](#gene-list) and[<span style="color:#00bfff">Gene Sets</span>](#gene-sets).

#### <span style="color:#00bfff">**Observations (obs) Tab Data Changes**</span>  
  As analysis progresses, changes in cell categories and continuous values will appear in the <span style="color:#00bfff">Observations (obs) Tab</span>. Users can click the **"Filter"** button at the top to filter the displayed data based on the following conditions:
  - All: Includes all cell categories and continuous values from the current analysis node.
  - New: Only shows the newly generated data from the current analysis node.
  - Changed: Shows data that has been modified in the current node.
  - Unchanged: Displays data that has not been modified in the current node, usually inherited from previous analysis nodes.
  - Deleted: Displays only the deleted data, which cannot be modified.
  - Annotation Generated: Displays only data of cells with [<span style="color:#00bfff">Cell Type Annotations</span>](#cell-type-annotation) generated.

![continuous-value-3](../../img/visualization-panel/continuous-value-3.png)

### <span style="color:#00bfff">**Gene List**</span>  
In the [<span style="color:#00bfff">Gene List</span>](#gene-list), users can click **"Paint"** (![paint-button](../../img/visualization-panel/paint-button.png)) button to select one or more genes to color the plot. They can also choose a color scheme for the genes or manually define the colors for their start, middle, and end values.

Users can also set the **X-axis** or **Y-axis** of the Embedding plot directly using **"X-Y"** (![xy-button](../../img/visualization-panel/xyvalue-button.png)) buttons next to the continuous values or genes, this function is also available in [<span style="color:#00bfff">Continuous Values</span>](#continuous-values) and [<span style="color:#00bfff">Gene Sets</span>](#gene-sets).

![gene-list-1](../../img/visualization-panel/gene-list-1.png)

## <span style="color:#00bfff">**Main Image and Plotting Function Area**</span>  
The [<span style="color:#00bfff">Main Image and Plotting Function Area</span>](#main-image-and-plotting-function-area) contains tabs for different image options. Users can click on a tab to view the images generated by various algorithm modules. Common image tabs like [<span style="color:#00bfff">Embedding</span>](#embedding), [<span style="color:#00bfff">Pathway</span>](#pathway), and [<span style="color:#00bfff">Plot</span>](#plot) are always present in each analysis node. An image tab with a red dot indicates that it was newly generated in the current analysis node.

![main-plot-1](../../img/visualization-panel/main-plot-1.png)

### <span style="color:#00bfff">**Quick Gene Algorithms**</span>  
  The [<span style="color:#00bfff">Main Image and Plotting Function Area</span>](#main-image-and-plotting-function-area) contains quick access to algorithms such as **Highly Variable Genes (HVG)** and **Rank Genes Group**.
  
  - Users can click the **"HVG"** button to input the number of highly variable genes and run the algorithm. The result can be viewed after the algorithm completes.
  
  - Users can click the **"Rank Genes Group"** button to select subcategories under the [<span style="color:#00bfff">Cell Categories</span>](#cell-categories-data-area) tab. After selecting the subcategories, they can choose the method for ranking genes and run the algorithm. The results will be available in the corresponding analysis node after completion. 
    After making selections, click the **"Method"** (![method-button](../../img/visualization-panel/method-button.png)) button to choose the desired method, then click **Submit**. Next, click the **Run** button to start the analysis. The analysis panel will display and execute the **Rank Genes Group** analysis node. Once the analysis is complete, you can view the results in the lower section of the [<span style="color:#00bfff">Cell and Gene Group Management Area</span>](#cell-and-gene-group-management-area) within the visualization panel of the analysis node.


### <span style="color:#00bfff">**Embedding**</span>  

#### <span style="color:#00bfff">Dimension Selection</span>  
  In the [<span style="color:#00bfff">Embedding</span>](#embedding) image tab, users can click the **"2D/3D Toggle"** button to switch between 2D and 3D views. Clicking the **"Dimensions"** button will display a list of dimensions generated by the current and previous analysis nodes. Users can quickly switch between them. If custom dimensions are needed, users can choose the **"Select Dimensions"** option to set **X-axis**, **Y-axis**, and **Z-axis** in a popup.

#### <span style="color:#00bfff">Cell Selection</span>
  Users can click the **"Drag"** (![drag-button](../../img/visualization-panel/drag-button.png)) button at the top of the [<span style="color:#00bfff">Embedding</span>](#embedding) image tab, then **"Select"** button (![select-button](../../img/visualization-panel/select-button.png)) to enter selection mode. They can then click on the starting point and drag to form a selection box around the desired cells. Once the selection is closed, only the selected cells will be displayed. Users can click the **"Save"** (![save-button](../../img/visualization-panel/save-button.png)) button to save the selected cells as a [<span style="color:#00bfff">Cell Sets</span>](#cell-sets) for further analysis.

  During the selection process, you can right-click or click the **"Cross"** (![cross-button](../../img/visualization-panel/cross-button.png)) button on the bottom toolbar to clear the current selection. If you wish to exit selection mode and return to drag mode, click the **"Select"** button at the top and then click the button in the pop-up window.

#### <span style="color:#00bfff">Cell Filtering</span>  
  In [<span style="color:#00bfff">Continuous Values</span>](#continuous-values) and **Gene Coloring**, users can filter cells directly in the [<span style="color:#00bfff">Embedding</span>](#embedding) image tab using histograms. users can expand the histogram of a data row even if it has not been used for highlighting. By clicking and dragging on the histogram, users can select a filtering range, and the cell points displayed on the [<span style="color:#00bfff">Embedding</span>](#embedding) page will be filtered accordingly. 
  Clicking any blank area on the histogram will exit the filtering state. Additionally, filters for [<span style="color:#00bfff">Continuous Values</span>](#continuous-values) and [<span style="color:#00bfff">Gene Sets</span>](#gene-sets) can be applied simultaneously and combined.
  
  ![cell-filtering](../../img/visualization-panel/cell-filtering.png)

  Users can also filter cells by adjusting sliders to refine the displayed cells. Users can also achieve the same filtering effect by adjusting the filter slider in the top-right corner of the [<span style="color:#00bfff">Embedding</span>](#embedding) tab when [<span style="color:#00bfff">Continuous Values</span>](#continuous-values) or [<span style="color:#00bfff">Gene Sets</span>](#gene-sets) have already been highlighted.
  
  ![cell-filtering-2](../../img/visualization-panel/cell-filtering-2.png)


#### <span style="color:#00bfff">Color Clipping</span> 
  The **Clipping** feature in the [<span style="color:#00bfff">Embedding</span>](#embedding) page helps manage color gradients in plots. The user can adjust the sliding bars to control where the color transition should start and end.
  
  The slider contains two draggable handles that primarily define the critical points for color transitions. When users adjust the handles, the areas of the image outside these two points will be color-saturated to match the color values at the handle positions. This overrides the original gradient effect, creating uniform coloring and emphasizing specific regions of the image.

  ![clipping-1](../../img/visualization-panel/clipping-1.png)

#### <span style="color:#00bfff">Resetting Filters and Operations</span>  
  If users have applied multiple filters on the [<span style="color:#00bfff">Embedding</span>](#embedding) page and wish to quickly revert to the unfiltered state, they can click the **"Filters"** button on the bottom toolbar. A pop-up window will display hidden items from [<span style="color:#00bfff">Cell Categories</span>](#cell-categories-data-area) and filtered items from [<span style="color:#00bfff">Continuous Values</span>](#continuous-values) (including genes). 
  
  Users can click the **"Cross"** (![cross-button](../../img/visualization-panel/small-cross-button.png)) buttons for each item to remove the specific filter or use the **"Clear"** (![clear-button](../../img/visualization-panel/clear-button.png)) button to clear all filters at once.  

  Alternatively, users can click the **"Reset"** button on the toolbar to restore the visualization panel to its initial state.

#### <span style="color:#00bfff">Full Screen</span>  
  Users can toggle full-screen mode by clicking the **"Full-screen"** (![fs-button](../../img/visualization-panel/fullscreen-button.png)) button at the top of the [<span style="color:#00bfff">Embedding</span>](#embedding) page. Clicking it again exits full-screen mode.

#### <span style="color:#00bfff">Graph Download</span>  
  Users can download the current visualization by clicking the **"Download"** (![download-button](../../img/visualization-panel/small-download-button.png)) button and selecting the desired image format.

#### <span style="color:#00bfff">Plot Beautification Settings</span>  
  [<span style="color:#00bfff">Embedding</span>](#embedding) provides several customization options to beautify the plots, including:
  - **Coordinate Axes**: Users can toggle the display of axes on the [<span style="color:#00bfff">Embedding</span>](#embedding) page by clicking the **"Display Axes"** (![axes-button](../../img/visualization-panel/display-axes-button-1.png)) button on the top toolbar. For more detailed adjustments, users can click the **"Tool"** (![tool-button](../../img/visualization-panel/tool-button.png)) button on the right to expand the **Styling Toolbar** and open the **Axis Styling Parameters** pop-up window by clicking **"Beautify Axes"** (![axes-button](../../img/visualization-panel/display-axes-button-2.png)) button.
  - **Cell Labels**: Users can toggle the display of cell labels on the scatterplot by clicking the **"Show Label"** (![show-label](../../img/visualization-panel/show-label-button-1.png)) button on the top toolbar of the [<span style="color:#00bfff">Embedding</span>](#embedding) page. For more detailed adjustments, users can click the **"Tool"** (![tool-button](../../img/visualization-panel/tool-button.png)) button on the right to expand the **Styling Toolbar** and open the **Cell Label Styling Parameters** pop-up window by clicking **"Beautify Label"** (![label-button](../../img/visualization-panel/show-label-button-2.png)) button.
  - **Cell Category Legend**: Users can toggle the display of the cell categories legend by clicking the **"Show Legend"** (![show-legend-1](../../img/visualization-panel/show-legend-button-1.png)) button on the top toolbar of the [<span style="color:#00bfff">Embedding</span>](#embedding) page. For more detailed adjustments, users can click the **"Tool"** (![tool-button](../../img/visualization-panel/tool-button.png)) button on the right to expand the **Styling Toolbar** and open the **Cell Categories Legend Styling Parameters** pop-up window by clicking **"Beautify Legend"** (![show-legend-2](../../img/visualization-panel/show-legend-button-2.png)) button.

#### <span style="color:#00bfff">**Pathway**</span>  
In the [<span style="color:#00bfff">Pathway</span>](#pathway) tab, users can create, view, and manage Pathway analysis results.

- <span style="color:#00bfff">**Create Pathway**</span>  
  Users can click the **"Create Pathway"** (![create-pathway](../../img/visualization-panel/create-pathway.png)) button in the [<span style="color:#00bfff">Pathway</span>](#pathway) tab, input a task name, select the gene set and species, choose the required library, and click **"OK"** to start the pathway analysis. After completion, the results will be available in the corresponding analysis node.

- <span style="color:#00bfff">**View Pathway**</span>  
  The [<span style="color:#00bfff">Pathway</span>](#pathway) tab lists the current and previous Pathway tasks. Users can click any task to view details and click **"Back"** (![back-button](../../img/visualization-panel/back-button.png)) button to return to the task list.

### <span style="color:#00bfff">**Plot**</span>  
In the [<span style="color:#00bfff">Plot</span>](#plot) tab, users can toggle between different plot types, such as <span style="color:#00bfff">Bar Plots</span> and <span style="color:#00bfff">Violin Plots</span>.
 
![plot](../../img/visualization-panel/plot.png)

- <span style="color:#00bfff">**Bar Plot**</span>  
  In the <span style="color:#00bfff">Bar Plot</span> mode, users can click a <span style="color:#00bfff">Cell Category</span> and select an **X-axis** to create the bar plot.

- <span style="color:#00bfff">**Violin Plot**</span>  
  In <span style="color:#00bfff">Violin Plot</span> mode, users can choose an **X-axis** and either <span style="color:#00bfff">Obs Continuous Values</span> or a <span style="color:#00bfff">Gene Set</span> for the **Y-axis** to generate a violin plot.

##  <span style="color:#00bfff">**Cell and Gene Group Management Area**</span>
In the [<span style="color:#00bfff">Cell and Gene Group Management Area</span>](#cell-and-gene-group-management-area), users can create and view [<span style="color:#00bfff">Cell Sets</span>](#cell-sets) and [<span style="color:#00bfff">Gene Sets</span>](#gene-sets). They can also perform [<span style="color:#00bfff">Cell Type Annotation</span>](#cell-type-annotation) and save the annotations as `obs` data.

### **<span style="color:#00bfff">Cell Sets</span>**
Apart from saving cell sets on the [<span style="color:#00bfff">Embedding</span>](#embedding) page, users can also create cell sets by clicking the **"Add"** button (![add-button](../../img/visualization-panel/viz-add-button.png)) under the [<span style="color:#00bfff">Cell Sets</span>](#cell-sets) tab. Additionally, users can upload an existing cell set CSV file by clicking the **"Upload"** (![upload-button](../../img/visualization-panel/viz-upload-button.png)) button under the [<span style="color:#00bfff">Cell Sets</span>](#cell-sets) tab to create a cell set.

Once the cell set is created, users can click the **"Annotate"** (![annotate-button](../../img/visualization-panel/viz-annotate-button.png)) button next to the cell set to save the current cell set to the [<span style="color:#00bfff">Cell Type Annotation</span>](#cell-type-annotation) group. Users can also click the **"Cluster"** (![cluster-button](../../img/visualization-panel/cluster-button.png)) button next to the cell set and choose the required clustering algorithm or use the cell set as target data for analysis.

### **<span style="color:#00bfff">Gene Sets</span>**
Users can create gene sets by clicking the **"Add"** button under the [<span style="color:#00bfff">Gene Sets</span>](#gene-sets) tab. Users can also upload an existing gene set CSV file by clicking the **"Upload"** (![upload-button](../../img/visualization-panel/viz-upload-button.png)) button under the [<span style="color:#00bfff">Gene Sets</span>](#gene-sets) tab to create a gene set. Once the gene set is created, users can click the **"Export"** (![export-button](../../img/visualization-panel/export-button.png)) button to export the gene set as a CSV file.

Users can click any gene set or the **"Color"** (![color-button](../../img/visualization-panel/color-button.png)) button next to the gene in the gene set to select a single-color or multi-color mode and use the gene set or gene for coloring the plot. When a gene set or gene is colored, users can click the **"Paint"** (![paint-button](../../img/visualization-panel/paint-button.png)) button to choose a different color scheme for the current coloring. Users can also click the color block icon next to each gene set or gene to manually define the color used for each gene in the gene set.

When in the [<span style="color:#00bfff">Cell Type Annotation</span>](#cell-type-annotation) state process, if users don't want to display gene expression only for unannotated cells, they can click the **hide anno** button next to the gene set, which will exclude the already annotated cells and re-calculate and draw the histogram of the expression levels.

### **<span style="color:#00bfff">Cell Type Annotation</span>**
When users need to annotate cell types, they can click the [<span style="color:#00bfff">Cell Type Annotation</span>](#cell-type-annotation) tab and select either **manual annotation** or **automatic annotation** by clicking the **"Add"** (![add-button](../../img/visualization-panel/viz-add-button.png)) button.

#### **<span style="color:#00bfff">Manual Annotation</span>**
After creating the annotation group, users can click the **"Add from Obs"** (![add-from](../../img/visualization-panel/add-from-obs-button.png)) button, and the cell category area will enter the selection state. Users can select options in the checkboxes on the right of the cell subcategories. After selection, they can click **"Save to annotation"** (![save-to-anno](../../img/visualization-panel/save-to-anno-button.png)) button to save the selected subcategory cells to the cell annotation group. 

When newly annotated cells (e.g., based on an existing category) overlap with cells already included in an **existing annotation group**, a pop-up notification will appear:  

- If you choose **"Keep in Original Annotation"** button, the overlapping cells will be removed from the new annotation.  
- If you choose **"Save as New Annotation"**, the overlapping cells in the original annotation group will be **moved to** the current annotation group.

![annotation-1](../../img/visualization-panel/manual-anno-1.png)

![annotation-2](../../img/visualization-panel/manual-anno-2.png)

Once all the cells are annotated, users can click the **"Upload"** (![upload-button](../../img/visualization-panel/viz-upload-button.png)) button to save the annotation results to **obs** (observations).

#### **<span style="color:#00bfff">Automatic Annotation</span>**
After selecting [<span style="color:#00bfff">Automatic Annotation</span>](#automatic-annotation), users choose the model type that matches the source data species type and the corresponding annotation category. After clicking OK, the analysis panel will appear, and the automatic annotation analysis node will run. Once completed, users can view the analysis results in the visualization panel of the analysis node.

![auto-anno](../../img/visualization-panel/auto-anno.png)

